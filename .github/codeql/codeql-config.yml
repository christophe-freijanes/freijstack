name: "CodeQL config • freijstack"

paths:
  - saas
  - base-infra

paths-ignore:
  # portfolio specific
  - saas/portfolio/**
  - portfolio/**

  # artefacts build / bundlers
  - "**/*.min.js"
  - "**/*.min.css"
  - "**/dist/**"
  - "**/build/**"
  - "**/.next/**"
  - "**/coverage/**"

  # dépendances / caches
  - "**/node_modules/**"
  - "**/.cache/**"

  # infra / tooling généré
  - "**/.terraform/**"
  - "**/.serverless/**"

queries:
  - uses: security-extended
  - uses: security-and-quality

# Désactivation de règles avec faux positifs connus
query-filters:
  - exclude:
      id: js/user-controlled-bypass
      # Justification: Faux positif sur middleware JWT standard
      # La validation du header Authorization est une sanitisation d'input,
      # pas une décision de sécurité. La vraie décision est faite par jwt.verify()
      # avec un secret contrôlé serveur (pattern standard en production)

  - exclude:
      id: js/incomplete-url-substring-sanitization
      # Justification: Faux positif sur extraction de token Bearer
      # substring(7) est utilisé après validation stricte du format

# Suppressions spécifiques par fichier (si nécessaire)
# paths-ignore peut être étendu avec des patterns plus fins
